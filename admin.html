<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="宏尚網站"/>
    <meta name="author" content="Jessica"/>
    <meta name="keywords" content="宏尚,公司,織帶,客製化,訂購,網站,彰化,北斗,傳產,口罩"/>
    <meta name="color-scheme" content="light only">
    <title>宏尚織帶有限公司後臺管理</title>
    <link rel="stylesheet" href="style.css">
    <style>
        #imagePreview { max-width: 200px; margin-top: 10px; display: none; }
        #productList { margin-top: 20px; }
        .product-preview { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .product-preview img { max-width: 100px; }
    </style>
</head>
<body>
    <h1>宏尚織帶有限公司後臺管理</h1>
    <h2>新增產品</h2>
    <form id="addProductForm" enctype="multipart/form-data">
        <input type="text" name="name" placeholder="產品名稱" required><br><br>
        <input type="file" name="image" accept="image/*" required><br>
        <img id="imagePreview" src="" alt="圖片預覽"><br>
        <textarea name="description" placeholder="產品描述" rows="4" cols="50"></textarea><br><br>
        <button type="submit" id="submitBtn">上傳</button>
    </form>
    <div id="message">提示：請上傳小於 2MB 的圖片，建議壓縮至 500KB 以下。</div>
    <div style="margin-top: 30px; text-align: center;">
        <a href="index5.html" style="background: #4CAF50; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
            查看所有產品
        </a>
        <button onclick="backupDatabase()" style="background: #ff9800; color: white; padding: 10px 20px; border: none; border-radius: 5px; margin-left: 10px;">
            備份資料庫
        </button>
    </div>
    <h2>已新增產品</h2>
    <div id="productList"></div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo"><h3>宏尚織帶有限公司</h3></div>
            <div class="footer-links">
                <div>
                    <h4>關於宏尚</h4>
                    <ul>
                        <li><a href="index2.html">企業資訊</a></li>
                    </ul>
                </div>
                <div>
                    <h4>顧客服務</h4>
                    <ul>
                        <li><a href="index6.html">購物說明</a></li>
                        <li><a href="index3.html">聯絡我們</a></li>
                    </ul>
                    <ul>
                        <h4>隱私權與網站使用條款</h4>
                        <li><a href="index7.html">隱私權政策</a></li>
                        <li><a href="index8.html">網站使用條款</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <h5>Copyright © Hong Sun Webbing Decoration Co., Ltd. All rights reserved.</h5>
                <button id="toTopBtn">↑ Top</button>
            </div>
        </div>
    </footer>

    <script src="admin.js"></script>
    <script>
        function backupDatabase() {
            fetch('/backup-db', { method: 'GET' })
                .then(response => {
                    if (!response.ok) throw new Error('備份請求失敗');
                    return response.blob();
                })
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `products_backup_${new Date().toISOString().split('T')[0]}.db`;
                    document.body.appendChild(a);
                    a.click();
                    a.remove();
                    window.URL.revokeObjectURL(url);
                })
                .catch(err => console.error('備份失敗:', err));
        }
    </script>
    <script src="script.js"></script>
</body>
</html>